Месье Бэзликов, [9/24/2022 3:58 PM]
условие: https://contest.yandex.ru/contest/28069/problems/A
мой код: https://pastebin.com/sAgZtP2b

Помогите пожал-а с...
Вопросы:

1. достойный ли код по качеству? Если нет — как улучшить?
2. почему в 15 строке нельзя сделать константную ссылку?
3. нужна ли функция  Node_Clear(tr)?

blue, [9/24/2022 4:11 PM]
[In reply to Месье Бэзликов]
задачу не смотрел, так как не могу, код бегло глянул
2. в данном случае ссылка там вообще не нужна, она наоборот твой код делает медленнее за счет дополнительного скрытого разыменовывания конкретно в данном случае
3. нужна, память сама себя не высвободит же

Месье Бэзликов, [9/24/2022 4:12 PM]
[In reply to blue]
"3. нужна, память сама себя не высвободит же" — но ведь сразу после этого код оканчивается, тогда и память освобождается, не?)

blue, [9/24/2022 4:12 PM]
Да, но что если бы этот код был частью какого-то проекта где это не было бы кейсом?

Месье Бэзликов, [9/24/2022 4:14 PM]
[In reply to blue]
вот я примерно так и думал, хотел подтверждение свой мысли, поэтому и оставил этот фрагмент, спасибо)

Месье Бэзликов, [9/24/2022 4:14 PM]
а вот за пункт 2 — не понял

blue, [9/24/2022 4:14 PM]
тогда ты бы получил утечку памяти, и если бы подобный код допускающий утечку вызывался бы часто, то через какой-то относительно небольшой промежуток времени ты бы либо получил краш (например если это x86-32 приложение которое умеет работать только с памятью в пределах 4-х гб), либо если система свапает на диск, то всё начнет очень сильно тупить

Месье Бэзликов, [9/24/2022 4:15 PM]
как по мне, ссылка же априори ускоряет выполгение проргаммы, не?

blue, [9/24/2022 4:15 PM]
нет, вообще тут немного базы бы не помешало, если упрощать и откинуть синтаксический сахар, то ссылка это такой же поинтер

blue, [9/24/2022 4:16 PM]
то есть в данном случае после компиляции мы получаем TreeNode** p, и как следствие скрытое разыменовывание

Месье Бэзликов, [9/24/2022 4:17 PM]
[In reply to blue]
получается, ссылку с указателя лучше вообще не использовать?

blue, [9/24/2022 4:17 PM]
это зависит от ситуации, если тебе не нужно модифицировать изначальный поинтер там, откуда ты его передаешь, то тогда да, это просто не имеет смысла

blue, [9/24/2022 4:19 PM]
тут уже мы плавно подходим к тому что такое lvalue и rvalue, ну rvalue ещё обычно делят на prvalue и xvalue, но туда углубляться не буду, если просто, то у тебя по факту lvalue refence, причем сам lvalue является указателем на объект, ты его не модифицируешь, поэтому передавать реф на него нет смысла

blue, [9/24/2022 4:20 PM]
ты работаешь с объектом на который указывает указатель, а не с самим указателем :)
